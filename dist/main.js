/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/Observable.ts":
/*!***************************!*\
  !*** ./src/Observable.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Observable\": () => (/* binding */ Observable)\n/* harmony export */ });\n/* harmony import */ var _lenses__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./lenses */ \"./src/lenses.ts\");\n\r\nclass Observable {\r\n    constructor(init) {\r\n        this.value = init;\r\n        this.watchers = [];\r\n        this[Symbol.asyncIterator] = async function* () {\r\n            while (true) {\r\n                yield this.value;\r\n                await new Promise((res) => {\r\n                    this.watchers.push(res);\r\n                });\r\n            }\r\n        };\r\n    }\r\n    notify(delta) {\r\n        this.value =\r\n            typeof delta === \"function\" ? delta(this.value) : delta;\r\n        this.watchers\r\n            .splice(0, this.watchers.length)\r\n            .forEach((watcher) => watcher(undefined));\r\n    }\r\n    focus(...lenses) {\r\n        const ob = this;\r\n        let prev = [];\r\n        // @ts-ignore\r\n        return {\r\n            [Symbol.asyncIterator]: async function* () {\r\n                for await (const value of ob) {\r\n                    const next = lenses.map((lens) => (0,_lenses__WEBPACK_IMPORTED_MODULE_0__.view)(value, lens));\r\n                    if (next.length !== prev.length ||\r\n                        next.some((n, i) => n !== prev[i])) {\r\n                        prev = next;\r\n                        yield value;\r\n                    }\r\n                }\r\n            },\r\n        };\r\n    }\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXRhbHVpLy4vc3JjL09ic2VydmFibGUudHM/OGNhNSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFxQztBQUU5QixNQUFNLFVBQVU7SUFLckIsWUFBWSxJQUFPO1FBQ2pCLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSTtRQUNqQixJQUFJLENBQUMsUUFBUSxHQUFHLEVBQUU7UUFFbEIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxhQUFhLENBQUMsR0FBRyxLQUFLLFNBQVMsQ0FBQztZQUMxQyxPQUFPLElBQUksRUFBRTtnQkFDWCxNQUFNLElBQUksQ0FBQyxLQUFLO2dCQUNoQixNQUFNLElBQUksT0FBTyxDQUFDLENBQUMsR0FBRyxFQUFFLEVBQUU7b0JBQ3hCLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQztnQkFDekIsQ0FBQyxDQUFDO2FBQ0g7UUFDSCxDQUFDO0lBQ0gsQ0FBQztJQUVELE1BQU0sQ0FBQyxLQUEwQjtRQUMvQixJQUFJLENBQUMsS0FBSztZQUNSLE9BQU8sS0FBSyxLQUFLLFVBQVUsQ0FBQyxDQUFDLENBQUUsS0FBdUIsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUs7UUFDNUUsSUFBSSxDQUFDLFFBQVE7YUFDVixNQUFNLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDO2FBQy9CLE9BQU8sQ0FBQyxDQUFDLE9BQU8sRUFBRSxFQUFFLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxDQUFDO0lBQzdDLENBQUM7SUFFRCxLQUFLLENBQUMsR0FBRyxNQUFrQztRQUN6QyxNQUFNLEVBQUUsR0FBa0IsSUFBSTtRQUM5QixJQUFJLElBQUksR0FBVSxFQUFFO1FBQ3BCLGFBQWE7UUFDYixPQUFPO1lBQ0wsQ0FBQyxNQUFNLENBQUMsYUFBYSxDQUFDLEVBQUUsS0FBSyxTQUFTLENBQUM7Z0JBQ3JDLElBQUksS0FBSyxFQUFFLE1BQU0sS0FBSyxJQUFJLEVBQUUsRUFBRTtvQkFDNUIsTUFBTSxJQUFJLEdBQUcsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksRUFBRSxFQUFFLENBQUMsNkNBQUksQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLENBQUM7b0JBQ3BELElBQ0UsSUFBSSxDQUFDLE1BQU0sS0FBSyxJQUFJLENBQUMsTUFBTTt3QkFDM0IsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsS0FBSyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFDbEM7d0JBQ0EsSUFBSSxHQUFHLElBQUk7d0JBQ1gsTUFBTSxLQUFLO3FCQUNaO2lCQUNGO1lBQ0gsQ0FBQztTQUNGO0lBQ0gsQ0FBQztDQUNGIiwiZmlsZSI6Ii4vc3JjL09ic2VydmFibGUudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBMZW5zLCB2aWV3IH0gZnJvbSBcIi4vbGVuc2VzXCJcclxuXHJcbmV4cG9ydCBjbGFzcyBPYnNlcnZhYmxlPFQgLyogZXh0ZW5kcyBFeHRyYWN0PCh2YWw6IFQpID0+IFQsIGFueT4gKi8+IHtcclxuICB2YWx1ZTogVFxyXG4gIHByaXZhdGUgd2F0Y2hlcnM6IEFycmF5PCh2YWx1ZTogdW5rbm93bikgPT4gdm9pZD47XHJcbiAgW1N5bWJvbC5hc3luY0l0ZXJhdG9yXTogKCkgPT4gQXN5bmNHZW5lcmF0b3I8VCwgbmV2ZXIsIHVua25vd24+XHJcblxyXG4gIGNvbnN0cnVjdG9yKGluaXQ6IFQpIHtcclxuICAgIHRoaXMudmFsdWUgPSBpbml0XHJcbiAgICB0aGlzLndhdGNoZXJzID0gW11cclxuXHJcbiAgICB0aGlzW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGFzeW5jIGZ1bmN0aW9uKiAoKSB7XHJcbiAgICAgIHdoaWxlICh0cnVlKSB7XHJcbiAgICAgICAgeWllbGQgdGhpcy52YWx1ZVxyXG4gICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXMpID0+IHtcclxuICAgICAgICAgIHRoaXMud2F0Y2hlcnMucHVzaChyZXMpXHJcbiAgICAgICAgfSlcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgbm90aWZ5KGRlbHRhOiBUIHwgKCh2YWw6IFQpID0+IFQpKSB7XHJcbiAgICB0aGlzLnZhbHVlID1cclxuICAgICAgdHlwZW9mIGRlbHRhID09PSBcImZ1bmN0aW9uXCIgPyAoZGVsdGEgYXMgKHZhbDogVCkgPT4gVCkodGhpcy52YWx1ZSkgOiBkZWx0YVxyXG4gICAgdGhpcy53YXRjaGVyc1xyXG4gICAgICAuc3BsaWNlKDAsIHRoaXMud2F0Y2hlcnMubGVuZ3RoKVxyXG4gICAgICAuZm9yRWFjaCgod2F0Y2hlcikgPT4gd2F0Y2hlcih1bmRlZmluZWQpKVxyXG4gIH1cclxuXHJcbiAgZm9jdXMoLi4ubGVuc2VzOiBMZW5zPGFueSwgYW55LCBhbnksIGFueT5bXSk6IE9ic2VydmFibGU8VD4ge1xyXG4gICAgY29uc3Qgb2I6IE9ic2VydmFibGU8VD4gPSB0aGlzXHJcbiAgICBsZXQgcHJldjogYW55W10gPSBbXVxyXG4gICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgW1N5bWJvbC5hc3luY0l0ZXJhdG9yXTogYXN5bmMgZnVuY3Rpb24qICgpIHtcclxuICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IHZhbHVlIG9mIG9iKSB7XHJcbiAgICAgICAgICBjb25zdCBuZXh0ID0gbGVuc2VzLm1hcCgobGVucykgPT4gdmlldyh2YWx1ZSwgbGVucykpXHJcbiAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIG5leHQubGVuZ3RoICE9PSBwcmV2Lmxlbmd0aCB8fFxyXG4gICAgICAgICAgICBuZXh0LnNvbWUoKG4sIGkpID0+IG4gIT09IHByZXZbaV0pXHJcbiAgICAgICAgICApIHtcclxuICAgICAgICAgICAgcHJldiA9IG5leHRcclxuICAgICAgICAgICAgeWllbGQgdmFsdWVcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/Observable.ts\n");

/***/ }),

/***/ "./src/lang.ts":
/*!*********************!*\
  !*** ./src/lang.ts ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"assoc\": () => (/* binding */ assoc),\n/* harmony export */   \"compose\": () => (/* binding */ compose),\n/* harmony export */   \"conj\": () => (/* binding */ conj),\n/* harmony export */   \"count\": () => (/* binding */ count),\n/* harmony export */   \"createUid\": () => (/* binding */ createUid),\n/* harmony export */   \"disj\": () => (/* binding */ disj),\n/* harmony export */   \"dissoc\": () => (/* binding */ dissoc),\n/* harmony export */   \"filter\": () => (/* binding */ filter),\n/* harmony export */   \"identity\": () => (/* binding */ identity),\n/* harmony export */   \"intersection\": () => (/* binding */ intersection),\n/* harmony export */   \"into\": () => (/* binding */ into),\n/* harmony export */   \"map\": () => (/* binding */ map),\n/* harmony export */   \"memo\": () => (/* binding */ memo),\n/* harmony export */   \"memoPromise\": () => (/* binding */ memoPromise),\n/* harmony export */   \"race\": () => (/* binding */ race),\n/* harmony export */   \"range\": () => (/* binding */ range),\n/* harmony export */   \"sleep\": () => (/* binding */ sleep),\n/* harmony export */   \"thread\": () => (/* binding */ thread),\n/* harmony export */   \"toArray\": () => (/* binding */ toArray),\n/* harmony export */   \"toObject\": () => (/* binding */ toObject),\n/* harmony export */   \"union\": () => (/* binding */ union)\n/* harmony export */ });\nconst assoc = (obj, ...pairs) => {\r\n    const r = { ...obj };\r\n    for (let i = 0; i + 1 < pairs.length; i += 2) {\r\n        r[pairs[i]] = pairs[i + 1];\r\n    }\r\n    return r;\r\n};\r\nfunction compose(...fs) {\r\n    return (x) => {\r\n        let r = x;\r\n        for (let i = fs.length - 1; i >= 0; i -= 1) {\r\n            r = fs[i](r);\r\n        }\r\n        return r;\r\n    };\r\n}\r\n\r\nconst conj = (coll, ...xs) => {\r\n    return new Set([...coll, ...xs]);\r\n};\r\nconst count = (coll) => coll.reduce((r) => r + 1, 0);\r\nconst createUid = () => Math.random().toString(16).substr(2);\r\nconst disj = (set, ...keys) => {\r\n    const r = new Set(set);\r\n    for (const key of keys) {\r\n        r.delete(key);\r\n    }\r\n    return r;\r\n};\r\nconst dissoc = (obj, ...keys) => {\r\n    const r = {};\r\n    for (const key in obj) {\r\n        if (keys.indexOf(key) === -1) {\r\n            r[key] = obj[key];\r\n        }\r\n    }\r\n    return r;\r\n};\r\nconst filter = (p, coll) => ({\r\n    reduce: (step, init) => coll.reduce((r, x) => (p(x) ? step(r, x) : r), init),\r\n});\r\n// export const reduce = (step, init, coll) => coll.reduce(step, init)\r\n// identity function\r\nconst identity = (x) => x;\r\nconst intersection = (s1, s2) => {\r\n    const r = new Set();\r\n    for (const x of s1) {\r\n        if (s2.has(x)) {\r\n            r.add(x);\r\n        }\r\n    }\r\n    return r;\r\n};\r\n// pour key-value pairs into object\r\nconst into = (obj, ...ps) => ps.reduce((r, [key, val]) => {\r\n    r[key] = val;\r\n    return r;\r\n}, { ...obj });\r\nfunction map(f, coll) {\r\n    return {\r\n        reduce: (step, init) => {\r\n            const t = coll.reduce\r\n                ? coll\r\n                : Object.entries(coll);\r\n            // @ts-ignore\r\n            return t.reduce((r, x) => step(r, f(x)), init);\r\n        },\r\n    };\r\n}\r\n\r\n// Return memoized function, optionally with hash creating function.\r\nconst memo = (f, getHash) => {\r\n    const cache = {};\r\n    return (...args) => {\r\n        const hash = getHash ? getHash(args) : JSON.stringify(args);\r\n        if (!(hash in cache)) {\r\n            cache[hash] = f(...args);\r\n        }\r\n        return cache[hash];\r\n    };\r\n};\r\n// memoize promise thunk\r\nconst memoPromise = (thunk) => {\r\n    const cache = [];\r\n    return async () => {\r\n        if (cache.length) {\r\n            return cache[0];\r\n        }\r\n        return await thunk().then((r) => {\r\n            cache[0] = r;\r\n            return r;\r\n        });\r\n    };\r\n};\r\n// race multiple async iterables\r\n// Needs multiple signatures like compose\r\nconst race = (...iterables) => ({\r\n    [Symbol.asyncIterator]: async function* () {\r\n        const iterators = iterables.map((iter) => iter[Symbol.asyncIterator]());\r\n        const values = await Promise.all(iterators.map((iterator) => iterator.next().then((n) => n.value)));\r\n        yield values;\r\n        const promises = iterators.map((iterator, i) => iterator.next().then((n) => [n.value, i]));\r\n        while (true) {\r\n            const [value, i] = await Promise.race(promises);\r\n            values[i] = value;\r\n            promises[i] = iterators[i].next().then((n) => [n.value, i]);\r\n            yield values;\r\n        }\r\n    },\r\n});\r\nconst range = (a, b) => ({\r\n    reduce: (step, init) => {\r\n        let r = init;\r\n        let i = a;\r\n        while (b === undefined || i < b) {\r\n            r = step(r, i);\r\n            i += 1;\r\n        }\r\n        return r;\r\n    },\r\n});\r\n// sleep for ms milliseconds\r\nconst sleep = (ms) => new Promise((res, rej) => {\r\n    setTimeout(() => {\r\n        res(undefined);\r\n    }, ms);\r\n});\r\nfunction thread(x, ...fs) {\r\n    return fs.reduce((x, f) => f(x), x);\r\n}\r\n\r\nconst toArray = (coll) => Array.isArray(coll)\r\n    ? coll\r\n    : coll.reduce((r, x) => {\r\n        r.push(x);\r\n        return r;\r\n    }, []);\r\nconst toObject = (entries) => entries.reduce((r, [key, val]) => {\r\n    r[key] = val;\r\n    return r;\r\n}, {});\r\nconst union = (s1, s2) => new Set([...s1, ...s2]);\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXRhbHVpLy4vc3JjL2xhbmcudHM/OTZmOSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFJTyxNQUFNLEtBQUssR0FBRyxDQUFDLEdBQXdCLEVBQUUsR0FBRyxLQUF1QixFQUFFLEVBQUU7SUFDNUUsTUFBTSxDQUFDLEdBQUcsRUFBRSxHQUFHLEdBQUcsRUFBRTtJQUNwQixLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEtBQUssQ0FBQyxNQUFNLEVBQUUsQ0FBQyxJQUFJLENBQUMsRUFBRTtRQUM1QyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7S0FDM0I7SUFFRCxPQUFPLENBQUM7QUFDVixDQUFDO0FBZUQsU0FBUyxPQUFPLENBQUMsR0FBRyxFQUF1QjtJQUN6QyxPQUFPLENBQUMsQ0FBTSxFQUFFLEVBQUU7UUFDaEIsSUFBSSxDQUFDLEdBQUcsQ0FBQztRQUNULEtBQUssSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxFQUFFO1lBQzFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQ2I7UUFFRCxPQUFPLENBQUM7SUFDVixDQUFDO0FBQ0gsQ0FBQztBQUVpQjtBQUVYLE1BQU0sSUFBSSxHQUFHLENBQUksSUFBWSxFQUFFLEdBQUcsRUFBTyxFQUFFLEVBQUU7SUFDbEQsT0FBTyxJQUFJLEdBQUcsQ0FBQyxDQUFDLEdBQUcsSUFBSSxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUM7QUFDbEMsQ0FBQztBQUVNLE1BQU0sS0FBSyxHQUFHLENBQUksSUFBa0IsRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUM7QUFFckUsTUFBTSxTQUFTLEdBQUcsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO0FBRTVELE1BQU0sSUFBSSxHQUFHLENBQUksR0FBVyxFQUFFLEdBQUcsSUFBUyxFQUFFLEVBQUU7SUFDbkQsTUFBTSxDQUFDLEdBQUcsSUFBSSxHQUFHLENBQUMsR0FBRyxDQUFDO0lBQ3RCLEtBQUssTUFBTSxHQUFHLElBQUksSUFBSSxFQUFFO1FBQ3RCLENBQUMsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDO0tBQ2Q7SUFFRCxPQUFPLENBQUM7QUFDVixDQUFDO0FBRU0sTUFBTSxNQUFNLEdBQUcsQ0FBQyxHQUF3QixFQUFFLEdBQUcsSUFBYyxFQUFFLEVBQUU7SUFDcEUsTUFBTSxDQUFDLEdBQXdCLEVBQUU7SUFDakMsS0FBSyxNQUFNLEdBQUcsSUFBSSxHQUFHLEVBQUU7UUFDckIsSUFBSSxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFO1lBQzVCLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxHQUFHLENBQUMsR0FBRyxDQUFDO1NBQ2xCO0tBQ0Y7SUFFRCxPQUFPLENBQUM7QUFDVixDQUFDO0FBRU0sTUFBTSxNQUFNLEdBQUcsQ0FDcEIsQ0FBb0IsRUFDcEIsSUFBa0IsRUFDSixFQUFFLENBQUMsQ0FBQztJQUNsQixNQUFNLEVBQUUsQ0FBQyxJQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUUsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FB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LENBQUMsRUFBRSxFQUFFO0lBQ2xELENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxHQUFHO0lBRVosT0FBTyxDQUFDO0FBQ1YsQ0FBQyxFQUFFLEVBQUUsQ0FBQztBQUVELE1BQU0sS0FBSyxHQUFHLENBQUksRUFBVSxFQUFFLEVBQVUsRUFBRSxFQUFFLENBQUMsSUFBSSxHQUFHLENBQUMsQ0FBQyxHQUFHLEVBQUUsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDIiwiZmlsZSI6Ii4vc3JjL2xhbmcudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgaW50ZXJmYWNlIFJlZHVjaWJsZTxUPiB7XHJcbiAgcmVkdWNlOiA8Uj4oc3RlcDogKHI6IFIsIHg6IFQpID0+IFIsIGluaXQ6IFIpID0+IFJcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGFzc29jID0gKG9iajogUmVjb3JkPHN0cmluZywgYW55PiwgLi4ucGFpcnM6IChzdHJpbmcgfCBhbnkpW10pID0+IHtcclxuICBjb25zdCByID0geyAuLi5vYmogfVxyXG4gIGZvciAobGV0IGkgPSAwOyBpICsgMSA8IHBhaXJzLmxlbmd0aDsgaSArPSAyKSB7XHJcbiAgICByW3BhaXJzW2ldXSA9IHBhaXJzW2kgKyAxXVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHJcclxufVxyXG5cclxuZnVuY3Rpb24gY29tcG9zZTxBLCBCLCBSPihnOiAoeDogQikgPT4gUiwgZjogKHg6IEEpID0+IEIpOiAoeDogQSkgPT4gUlxyXG5mdW5jdGlvbiBjb21wb3NlPEEsIEIsIEMsIFI+KFxyXG4gIGg6ICh4OiBDKSA9PiBSLFxyXG4gIGc6ICh4OiBCKSA9PiBDLFxyXG4gIGY6ICh4OiBBKSA9PiBCXHJcbik6ICh4OiBBKSA9PiBSXHJcbmZ1bmN0aW9uIGNvbXBvc2U8QSwgQiwgQywgRCwgUj4oXHJcbiAgaTogKHg6IEQpID0+IFIsXHJcbiAgaDogKHg6IEMpID0+IEQsXHJcbiAgZzogKHg6IEIpID0+IEMsXHJcbiAgZjogKHg6IEEpID0+IEJcclxuKTogKHg6IEEpID0+IFJcclxuXHJcbmZ1bmN0aW9uIGNvbXBvc2UoLi4uZnM6ICgoeDogYW55KSA9PiBhbnkpW10pIHtcclxuICByZXR1cm4gKHg6IGFueSkgPT4ge1xyXG4gICAgbGV0IHIgPSB4XHJcbiAgICBmb3IgKGxldCBpID0gZnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpIC09IDEpIHtcclxuICAgICAgciA9IGZzW2ldKHIpXHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHJcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCB7IGNvbXBvc2UgfVxyXG5cclxuZXhwb3J0IGNvbnN0IGNvbmogPSA8VD4oY29sbDogU2V0PFQ+LCAuLi54czogVFtdKSA9PiB7XHJcbiAgcmV0dXJuIG5ldyBTZXQoWy4uLmNvbGwsIC4uLnhzXSlcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGNvdW50ID0gPFQ+KGNvbGw6IFJlZHVjaWJsZTxUPikgPT4gY29sbC5yZWR1Y2UoKHIpID0+IHIgKyAxLCAwKVxyXG5cclxuZXhwb3J0IGNvbnN0IGNyZWF0ZVVpZCA9ICgpID0+IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMTYpLnN1YnN0cigyKVxyXG5cclxuZXhwb3J0IGNvbnN0IGRpc2ogPSA8VD4oc2V0OiBTZXQ8VD4sIC4uLmtleXM6IFRbXSkgPT4ge1xyXG4gIGNvbnN0IHIgPSBuZXcgU2V0KHNldClcclxuICBmb3IgKGNvbnN0IGtleSBvZiBrZXlzKSB7XHJcbiAgICByLmRlbGV0ZShrZXkpXHJcbiAgfVxyXG5cclxuICByZXR1cm4gclxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgZGlzc29jID0gKG9iajogUmVjb3JkPHN0cmluZywgYW55PiwgLi4ua2V5czogc3RyaW5nW10pID0+IHtcclxuICBjb25zdCByOiBSZWNvcmQ8c3RyaW5nLCBhbnk+ID0ge31cclxuICBmb3IgKGNvbnN0IGtleSBpbiBvYmopIHtcclxuICAgIGlmIChrZXlzLmluZGV4T2Yoa2V5KSA9PT0gLTEpIHtcclxuICAgICAgcltrZXldID0gb2JqW2tleV1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJldHVybiByXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBmaWx0ZXIgPSA8VD4oXHJcbiAgcDogKHg6IFQpID0+IGJvb2xlYW4sXHJcbiAgY29sbDogUmVkdWNpYmxlPFQ+XHJcbik6IFJlZHVjaWJsZTxUPiA9PiAoe1xyXG4gIHJlZHVjZTogKHN0ZXAsIGluaXQpID0+IGNvbGwucmVkdWNlKChyLCB4KSA9PiAocCh4KSA/IHN0ZXAociwgeCkgOiByKSwgaW5pdCksXHJcbn0pXHJcblxyXG4vLyBleHBvcnQgY29uc3QgcmVkdWNlID0gKHN0ZXAsIGluaXQsIGNvbGwpID0+IGNvbGwucmVkdWNlKHN0ZXAsIGluaXQpXHJcblxyXG4vLyBpZGVudGl0eSBmdW5jdGlvblxyXG5leHBvcnQgY29uc3QgaWRlbnRpdHkgPSA8VD4oeDogVCkgPT4geFxyXG5cclxuZXhwb3J0IGNvbnN0IGludGVyc2VjdGlvbiA9IDxUPihzMTogU2V0PFQ+LCBzMjogU2V0PFQ+KTogU2V0PFQ+ID0+IHtcclxuICBjb25zdCByID0gbmV3IFNldDxUPigpXHJcblxyXG4gIGZvciAoY29uc3QgeCBvZiBzMSkge1xyXG4gICAgaWYgKHMyLmhhcyh4KSkge1xyXG4gICAgICByLmFkZCh4KVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHJcclxufVxyXG5cclxuLy8gcG91ciBrZXktdmFsdWUgcGFpcnMgaW50byBvYmplY3RcclxuZXhwb3J0IGNvbnN0IGludG8gPSAoXHJcbiAgb2JqOiBSZWNvcmQ8c3RyaW5nLCBhbnk+LFxyXG4gIC4uLnBzOiBbc3RyaW5nLCBhbnldW11cclxuKTogUmVjb3JkPHN0cmluZywgYW55PiA9PlxyXG4gIHBzLnJlZHVjZShcclxuICAgIChyLCBba2V5LCB2YWxdKSA9PiB7XHJcbiAgICAgIHJba2V5XSA9IHZhbFxyXG5cclxuICAgICAgcmV0dXJuIHJcclxuICAgIH0sXHJcbiAgICB7IC4uLm9iaiB9XHJcbiAgKVxyXG5cclxuZnVuY3Rpb24gbWFwPFQsIFU+KGY6ICh4OiBUKSA9PiBVLCBjb2xsOiBSZWR1Y2libGU8VD4pOiBSZWR1Y2libGU8VT5cclxuZnVuY3Rpb24gbWFwPFQsIFU+KFxyXG4gIGY6IChbaywgdl06IFtzdHJpbmcsIFRdKSA9PiBVLFxyXG4gIGNvbGw6IFJlY29yZDxzdHJpbmcsIFQ+XHJcbik6IFJlZHVjaWJsZTxVPlxyXG5cclxuZnVuY3Rpb24gbWFwPFQsIFU+KFxyXG4gIGY6ICh4OiBUIHwgW3N0cmluZywgVF0pID0+IFUsXHJcbiAgY29sbDogUmVkdWNpYmxlPFQ+IHwgUmVjb3JkPHN0cmluZywgVD5cclxuKSB7XHJcbiAgcmV0dXJuIHtcclxuICAgIHJlZHVjZTogPFI+KHN0ZXA6IChyOiBSLCB4OiBVKSA9PiBSLCBpbml0OiBSKSA9PiB7XHJcbiAgICAgIGNvbnN0IHQ6IFJlZHVjaWJsZTxUPiB8IFtzdHJpbmcsIFRdW10gPSBjb2xsLnJlZHVjZVxyXG4gICAgICAgID8gKGNvbGwgYXMgUmVkdWNpYmxlPFQ+KVxyXG4gICAgICAgIDogT2JqZWN0LmVudHJpZXMoY29sbClcclxuICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICByZXR1cm4gdC5yZWR1Y2U8Uj4oKHI6IFIsIHg6IFQgfCBbc3RyaW5nLCBUXSk6IFIgPT4gc3RlcChyLCBmKHgpKSwgaW5pdClcclxuICAgIH0sXHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgeyBtYXAgfVxyXG5cclxuLy8gUmV0dXJuIG1lbW9pemVkIGZ1bmN0aW9uLCBvcHRpb25hbGx5IHdpdGggaGFzaCBjcmVhdGluZyBmdW5jdGlvbi5cclxuZXhwb3J0IGNvbnN0IG1lbW8gPSA8QSBleHRlbmRzIGFueVtdLCBSPihcclxuICBmOiAoLi4uYXJnczogQSkgPT4gUixcclxuICBnZXRIYXNoPzogKGFyZ3M6IEEpID0+IHN0cmluZ1xyXG4pID0+IHtcclxuICBjb25zdCBjYWNoZTogUmVjb3JkPHN0cmluZywgUj4gPSB7fVxyXG5cclxuICByZXR1cm4gKC4uLmFyZ3M6IEEpOiBSID0+IHtcclxuICAgIGNvbnN0IGhhc2ggPSBnZXRIYXNoID8gZ2V0SGFzaChhcmdzKSA6IEpTT04uc3RyaW5naWZ5KGFyZ3MpXHJcblxyXG4gICAgaWYgKCEoaGFzaCBpbiBjYWNoZSkpIHtcclxuICAgICAgY2FjaGVbaGFzaF0gPSBmKC4uLmFyZ3MpXHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGNhY2hlW2hhc2hdXHJcbiAgfVxyXG59XHJcblxyXG50eXBlIFRodW5rPFQ+ID0gKCkgPT4gUHJvbWlzZTxUPlxyXG5cclxuLy8gbWVtb2l6ZSBwcm9taXNlIHRodW5rXHJcbmV4cG9ydCBjb25zdCBtZW1vUHJvbWlzZSA9IDxUPih0aHVuazogVGh1bms8VD4pID0+IHtcclxuICBjb25zdCBjYWNoZTogVFtdID0gW11cclxuXHJcbiAgcmV0dXJuIGFzeW5jICgpID0+IHtcclxuICAgIGlmIChjYWNoZS5sZW5ndGgpIHtcclxuICAgICAgcmV0dXJuIGNhY2hlWzBdXHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGF3YWl0IHRodW5rKCkudGhlbigocikgPT4ge1xyXG4gICAgICBjYWNoZVswXSA9IHJcclxuXHJcbiAgICAgIHJldHVybiByXHJcbiAgICB9KVxyXG4gIH1cclxufVxyXG5cclxuLy8gcmFjZSBtdWx0aXBsZSBhc3luYyBpdGVyYWJsZXNcclxuLy8gTmVlZHMgbXVsdGlwbGUgc2lnbmF0dXJlcyBsaWtlIGNvbXBvc2VcclxuZXhwb3J0IGNvbnN0IHJhY2UgPSAoLi4uaXRlcmFibGVzOiBBc3luY0l0ZXJhYmxlPGFueT5bXSkgPT4gKHtcclxuICBbU3ltYm9sLmFzeW5jSXRlcmF0b3JdOiBhc3luYyBmdW5jdGlvbiogKCkge1xyXG4gICAgY29uc3QgaXRlcmF0b3JzID0gaXRlcmFibGVzLm1hcCgoaXRlcikgPT4gaXRlcltTeW1ib2wuYXN5bmNJdGVyYXRvcl0oKSlcclxuICAgIGNvbnN0IHZhbHVlcyA9IGF3YWl0IFByb21pc2UuYWxsKFxyXG4gICAgICBpdGVyYXRvcnMubWFwKChpdGVyYXRvcikgPT4gaXRlcmF0b3IubmV4dCgpLnRoZW4oKG4pID0+IG4udmFsdWUpKVxyXG4gICAgKVxyXG4gICAgeWllbGQgdmFsdWVzXHJcblxyXG4gICAgY29uc3QgcHJvbWlzZXMgPSBpdGVyYXRvcnMubWFwKChpdGVyYXRvciwgaSkgPT5cclxuICAgICAgaXRlcmF0b3IubmV4dCgpLnRoZW4oKG4pID0+IFtuLnZhbHVlLCBpXSlcclxuICAgIClcclxuICAgIHdoaWxlICh0cnVlKSB7XHJcbiAgICAgIGNvbnN0IFt2YWx1ZSwgaV0gPSBhd2FpdCBQcm9taXNlLnJhY2UocHJvbWlzZXMpXHJcbiAgICAgIHZhbHVlc1tpXSA9IHZhbHVlXHJcbiAgICAgIHByb21pc2VzW2ldID0gaXRlcmF0b3JzW2ldLm5leHQoKS50aGVuKChuKSA9PiBbbi52YWx1ZSwgaV0pXHJcbiAgICAgIHlpZWxkIHZhbHVlc1xyXG4gICAgfVxyXG4gIH0sXHJcbn0pXHJcblxyXG5leHBvcnQgY29uc3QgcmFuZ2UgPSAoYTogbnVtYmVyLCBiOiBudW1iZXIpOiBSZWR1Y2libGU8bnVtYmVyPiA9PiAoe1xyXG4gIHJlZHVjZTogKHN0ZXAsIGluaXQpID0+IHtcclxuICAgIGxldCByID0gaW5pdFxyXG4gICAgbGV0IGkgPSBhXHJcbiAgICB3aGlsZSAoYiA9PT0gdW5kZWZpbmVkIHx8IGkgPCBiKSB7XHJcbiAgICAgIHIgPSBzdGVwKHIsIGkpXHJcbiAgICAgIGkgKz0gMVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiByXHJcbiAgfSxcclxufSlcclxuXHJcbi8vIHNsZWVwIGZvciBtcyBtaWxsaXNlY29uZHNcclxuZXhwb3J0IGNvbnN0IHNsZWVwID0gKG1zOiBudW1iZXIpOiBQcm9taXNlPHVuZGVmaW5lZD4gPT5cclxuICBuZXcgUHJvbWlzZSgocmVzLCByZWopID0+IHtcclxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICByZXModW5kZWZpbmVkKVxyXG4gICAgfSwgbXMpXHJcbiAgfSlcclxuXHJcbi8vIFJldHVybiByZXN1bHQgb2YgdGhyZWFkaW5nIGluaXRpYWwgdmFsdWUgdGhyb3VnaCBhIHNlcmllcyBvZiBmdW5jdGlvbnMuXHJcbmZ1bmN0aW9uIHRocmVhZDxBLCBCLCBSPih4OiBBLCBmOiAoeDogQSkgPT4gQiwgZzogKHg6IEIpID0+IFIpOiBSXHJcbmZ1bmN0aW9uIHRocmVhZDxBLCBCLCBDLCBSPihcclxuICB4OiBBLFxyXG4gIGY6ICh4OiBBKSA9PiBCLFxyXG4gIGc6ICh4OiBCKSA9PiBDLFxyXG4gIGg6ICh4OiBDKSA9PiBSXHJcbik6IFJcclxuZnVuY3Rpb24gdGhyZWFkPEEsIEIsIEMsIEQsIFI+KFxyXG4gIHg6IEEsXHJcbiAgZjogKHg6IEEpID0+IEIsXHJcbiAgZzogKHg6IEIpID0+IEMsXHJcbiAgaDogKHg6IEMpID0+IEQsXHJcbiAgaTogKHg6IEQpID0+IFJcclxuKTogUlxyXG5cclxuZnVuY3Rpb24gdGhyZWFkKHg6IGFueSwgLi4uZnM6ICgoeDogYW55KSA9PiBhbnkpW10pIHtcclxuICByZXR1cm4gZnMucmVkdWNlKCh4LCBmKSA9PiBmKHgpLCB4KVxyXG59XHJcblxyXG5leHBvcnQgeyB0aHJlYWQgfVxyXG5cclxuZXhwb3J0IGNvbnN0IHRvQXJyYXkgPSA8VD4oY29sbDogUmVkdWNpYmxlPFQ+KTogVFtdID0+XHJcbiAgQXJyYXkuaXNBcnJheShjb2xsKVxyXG4gICAgPyBjb2xsXHJcbiAgICA6IGNvbGwucmVkdWNlKChyOiBUW10sIHgpID0+IHtcclxuICAgICAgICByLnB1c2goeClcclxuXHJcbiAgICAgICAgcmV0dXJuIHJcclxuICAgICAgfSwgW10pXHJcblxyXG5leHBvcnQgY29uc3QgdG9PYmplY3QgPSA8VD4oXHJcbiAgZW50cmllczogUmVkdWNpYmxlPFtzdHJpbmcsIFRdPlxyXG4pOiBSZWNvcmQ8c3RyaW5nLCBUPiA9PlxyXG4gIGVudHJpZXMucmVkdWNlPFJlY29yZDxzdHJpbmcsIFQ+PigociwgW2tleSwgdmFsXSkgPT4ge1xyXG4gICAgcltrZXldID0gdmFsXHJcblxyXG4gICAgcmV0dXJuIHJcclxuICB9LCB7fSlcclxuXHJcbmV4cG9ydCBjb25zdCB1bmlvbiA9IDxUPihzMTogU2V0PFQ+LCBzMjogU2V0PFQ+KSA9PiBuZXcgU2V0KFsuLi5zMSwgLi4uczJdKVxyXG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/lang.ts\n");

/***/ }),

/***/ "./src/lenses.ts":
/*!***********************!*\
  !*** ./src/lenses.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"grind\": () => (/* binding */ grind),\n/* harmony export */   \"over\": () => (/* binding */ over),\n/* harmony export */   \"prop\": () => (/* binding */ prop),\n/* harmony export */   \"view\": () => (/* binding */ view)\n/* harmony export */ });\n/* harmony import */ var _lang__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./lang */ \"./src/lang.ts\");\n\r\nclass Identity {\r\n    constructor(x) {\r\n        this.x = x;\r\n    }\r\n    map(f) {\r\n        return new Identity(f(this.x));\r\n    }\r\n}\r\nclass Const {\r\n    constructor(x) {\r\n        this.x = x;\r\n    }\r\n    map(f) {\r\n        return new Const(this.x);\r\n    }\r\n}\r\nconst grind = (...keys) => \r\n// @ts-ignore\r\n(0,_lang__WEBPACK_IMPORTED_MODULE_0__.compose)(...keys.map(prop));\r\nconst over = (lens, f) => (obj) => lens((x) => new Identity(f(x)))(obj).x;\r\nconst prop = (key) => (f) => (obj) => f(obj && obj[key]).map((val) => ({\r\n    ...obj,\r\n    [key]: val,\r\n}));\r\nconst view = (obj, lens) => lens((x) => new Const(x))(obj).x;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXRhbHVpLy4vc3JjL2xlbnNlcy50cz9jYjY5Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQWdDO0FBTWhDLE1BQU0sUUFBUTtJQUdaLFlBQVksQ0FBSTtRQUNkLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQztJQUNaLENBQUM7SUFFRCxHQUFHLENBQUksQ0FBYztRQUNuQixPQUFPLElBQUksUUFBUSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDaEMsQ0FBQztDQUNGO0FBRUQsTUFBTSxLQUFLO0lBR1QsWUFBWSxDQUFJO1FBQ2QsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDO0lBQ1osQ0FBQztJQUVELEdBQUcsQ0FBSSxDQUFjO1FBQ25CLE9BQU8sSUFBSSxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztJQUMxQixDQUFDO0NBQ0Y7QUFNTSxNQUFNLEtBQUssR0FBRyxDQUFDLEdBQUcsSUFBYyxFQUE0QixFQUFFO0FBQ25FLGFBQWE7QUFDYiw4Q0FBTyxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUVyQixNQUFNLElBQUksR0FBRyxDQUFhLElBQXNCLEVBQUUsQ0FBYyxFQUFFLEVBQUUsQ0FBQyxDQUMxRSxHQUFNLEVBQ0gsRUFBRSxDQUFFLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsSUFBSSxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQWlCLENBQUMsQ0FBQztBQUV4RCxNQUFNLElBQUksR0FBRyxDQUFDLEdBQVcsRUFBNEIsRUFBRSxDQUFDLENBQzdELENBQXVCLEVBQ3ZCLEVBQUUsQ0FBQyxDQUFDLEdBQXNCLEVBQUUsRUFBRSxDQUM5QixDQUFDLENBQUMsR0FBRyxJQUFJLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsRUFBRSxFQUFFLENBQUMsQ0FBQztJQUMvQixHQUFHLEdBQUc7SUFDTixDQUFDLEdBQUcsQ0FBQyxFQUFFLEdBQUc7Q0FDWCxDQUFDLENBQUM7QUFFRSxNQUFNLElBQUksR0FBRyxDQUFhLEdBQU0sRUFBRSxJQUFzQixFQUFLLEVBQUUsQ0FDbkUsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxJQUFJLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBaUIsQ0FBQyxDQUFDIiwiZmlsZSI6Ii4vc3JjL2xlbnNlcy50cy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNvbXBvc2UgfSBmcm9tIFwiLi9sYW5nXCJcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgRnVuY3RvcjxUPiB7XHJcbiAgbWFwOiA8Uj4oZjogKHg6IFQpID0+IFIpID0+IEZ1bmN0b3I8Uj5cclxufVxyXG5cclxuY2xhc3MgSWRlbnRpdHk8VD4gaW1wbGVtZW50cyBGdW5jdG9yPFQ+IHtcclxuICB4OiBUXHJcblxyXG4gIGNvbnN0cnVjdG9yKHg6IFQpIHtcclxuICAgIHRoaXMueCA9IHhcclxuICB9XHJcblxyXG4gIG1hcDxSPihmOiAoeDogVCkgPT4gUik6IElkZW50aXR5PFI+IHtcclxuICAgIHJldHVybiBuZXcgSWRlbnRpdHkoZih0aGlzLngpKVxyXG4gIH1cclxufVxyXG5cclxuY2xhc3MgQ29uc3Q8VCwgVT4gaW1wbGVtZW50cyBGdW5jdG9yPFU+IHtcclxuICB4OiBUXHJcblxyXG4gIGNvbnN0cnVjdG9yKHg6IFQpIHtcclxuICAgIHRoaXMueCA9IHhcclxuICB9XHJcblxyXG4gIG1hcDxSPihmOiAoeDogVSkgPT4gUik6IENvbnN0PFQsIFI+IHtcclxuICAgIHJldHVybiBuZXcgQ29uc3QodGhpcy54KVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IHR5cGUgTGVuczxzLCB0LCBhLCBiPiA9IChcclxuICBmOiAoeDogYSkgPT4gRnVuY3RvcjxiPlxyXG4pID0+IChvYmo6IHMpID0+IEZ1bmN0b3I8dD5cclxuXHJcbmV4cG9ydCBjb25zdCBncmluZCA9ICguLi5rZXlzOiBzdHJpbmdbXSk6IExlbnM8YW55LCBhbnksIGFueSwgYW55PiA9PlxyXG4gIC8vIEB0cy1pZ25vcmVcclxuICBjb21wb3NlKC4uLmtleXMubWFwKHByb3ApKVxyXG5cclxuZXhwb3J0IGNvbnN0IG92ZXIgPSA8cywgdCwgYSwgYj4obGVuczogTGVuczxzLCB0LCBhLCBiPiwgZjogKHg6IGEpID0+IGIpID0+IChcclxuICBvYmo6IHNcclxuKTogdCA9PiAobGVucygoeCkgPT4gbmV3IElkZW50aXR5KGYoeCkpKShvYmopIGFzIElkZW50aXR5PHQ+KS54XHJcblxyXG5leHBvcnQgY29uc3QgcHJvcCA9IChrZXk6IHN0cmluZyk6IExlbnM8YW55LCBhbnksIGFueSwgYW55PiA9PiA8YSwgYj4oXHJcbiAgZjogKHg6IGEpID0+IEZ1bmN0b3I8Yj5cclxuKSA9PiAob2JqOiBSZWNvcmQ8c3RyaW5nLCBhPikgPT5cclxuICBmKG9iaiAmJiBvYmpba2V5XSkubWFwKCh2YWwpID0+ICh7XHJcbiAgICAuLi5vYmosXHJcbiAgICBba2V5XTogdmFsLFxyXG4gIH0pKVxyXG5cclxuZXhwb3J0IGNvbnN0IHZpZXcgPSA8cywgdCwgYSwgYj4ob2JqOiBzLCBsZW5zOiBMZW5zPHMsIHQsIGEsIGI+KTogYiA9PlxyXG4gIChsZW5zKCh4KSA9PiBuZXcgQ29uc3QoeCkpKG9iaikgYXMgQ29uc3Q8YiwgdD4pLnhcclxuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/lenses.ts\n");

/***/ }),

/***/ "./src/main.ts":
/*!*********************!*\
  !*** ./src/main.ts ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"assoc\": () => (/* reexport safe */ _lang__WEBPACK_IMPORTED_MODULE_0__.assoc),\n/* harmony export */   \"compose\": () => (/* reexport safe */ _lang__WEBPACK_IMPORTED_MODULE_0__.compose),\n/* harmony export */   \"conj\": () => (/* reexport safe */ _lang__WEBPACK_IMPORTED_MODULE_0__.conj),\n/* harmony export */   \"count\": () => (/* reexport safe */ _lang__WEBPACK_IMPORTED_MODULE_0__.count),\n/* harmony export */   \"createUid\": () => (/* reexport safe */ _lang__WEBPACK_IMPORTED_MODULE_0__.createUid),\n/* harmony export */   \"disj\": () => (/* reexport safe */ _lang__WEBPACK_IMPORTED_MODULE_0__.disj),\n/* harmony export */   \"dissoc\": () => (/* reexport safe */ _lang__WEBPACK_IMPORTED_MODULE_0__.dissoc),\n/* harmony export */   \"filter\": () => (/* reexport safe */ _lang__WEBPACK_IMPORTED_MODULE_0__.filter),\n/* harmony export */   \"identity\": () => (/* reexport safe */ _lang__WEBPACK_IMPORTED_MODULE_0__.identity),\n/* harmony export */   \"intersection\": () => (/* reexport safe */ _lang__WEBPACK_IMPORTED_MODULE_0__.intersection),\n/* harmony export */   \"into\": () => (/* reexport safe */ _lang__WEBPACK_IMPORTED_MODULE_0__.into),\n/* harmony export */   \"map\": () => (/* reexport safe */ _lang__WEBPACK_IMPORTED_MODULE_0__.map),\n/* harmony export */   \"memo\": () => (/* reexport safe */ _lang__WEBPACK_IMPORTED_MODULE_0__.memo),\n/* harmony export */   \"memoPromise\": () => (/* reexport safe */ _lang__WEBPACK_IMPORTED_MODULE_0__.memoPromise),\n/* harmony export */   \"race\": () => (/* reexport safe */ _lang__WEBPACK_IMPORTED_MODULE_0__.race),\n/* harmony export */   \"range\": () => (/* reexport safe */ _lang__WEBPACK_IMPORTED_MODULE_0__.range),\n/* harmony export */   \"sleep\": () => (/* reexport safe */ _lang__WEBPACK_IMPORTED_MODULE_0__.sleep),\n/* harmony export */   \"thread\": () => (/* reexport safe */ _lang__WEBPACK_IMPORTED_MODULE_0__.thread),\n/* harmony export */   \"toArray\": () => (/* reexport safe */ _lang__WEBPACK_IMPORTED_MODULE_0__.toArray),\n/* harmony export */   \"toObject\": () => (/* reexport safe */ _lang__WEBPACK_IMPORTED_MODULE_0__.toObject),\n/* harmony export */   \"union\": () => (/* reexport safe */ _lang__WEBPACK_IMPORTED_MODULE_0__.union),\n/* harmony export */   \"render\": () => (/* reexport safe */ _metalui__WEBPACK_IMPORTED_MODULE_1__.render),\n/* harmony export */   \"toxml\": () => (/* reexport safe */ _metalui__WEBPACK_IMPORTED_MODULE_1__.toxml),\n/* harmony export */   \"Observable\": () => (/* reexport safe */ _Observable__WEBPACK_IMPORTED_MODULE_2__.Observable)\n/* harmony export */ });\n/* harmony import */ var _lang__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./lang */ \"./src/lang.ts\");\n/* harmony import */ var _metalui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./metalui */ \"./src/metalui.ts\");\n/* harmony import */ var _Observable__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Observable */ \"./src/Observable.ts\");\n\r\n\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXRhbHVpLy4vc3JjL21haW4udHM/Y2Q0OSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBc0I7QUFDRztBQUNHIiwiZmlsZSI6Ii4vc3JjL21haW4udHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgKiBmcm9tIFwiLi9sYW5nXCJcclxuZXhwb3J0ICogZnJvbSBcIi4vbWV0YWx1aVwiXHJcbmV4cG9ydCAqIGZyb20gXCIuL09ic2VydmFibGVcIlxyXG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/main.ts\n");

/***/ }),

/***/ "./src/metalui.ts":
/*!************************!*\
  !*** ./src/metalui.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"toxml\": () => (/* binding */ toxml),\n/* harmony export */   \"render\": () => (/* binding */ render)\n/* harmony export */ });\n/* harmony import */ var _lang__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./lang */ \"./src/lang.ts\");\n\r\n// JSONML to XML string\r\nconst toxml = (el, gkey, ids) => {\r\n    if (Array.isArray(el)) {\r\n        const [name, props, ...children] = el;\r\n        const evented = (0,_lang__WEBPACK_IMPORTED_MODULE_0__.toObject)((0,_lang__WEBPACK_IMPORTED_MODULE_0__.map)(([key, val]) => {\r\n            if (key.substr(0, 2) !== \"on\") {\r\n                return [key, val];\r\n            }\r\n            else {\r\n                const id = key + \"-\" + (0,_lang__WEBPACK_IMPORTED_MODULE_0__.createUid)();\r\n                glob[gkey] = ids;\r\n                ids[id] = (event) => val(event);\r\n                return [key, `glob['${gkey}']['${id}'](event)`];\r\n            }\r\n        }, props));\r\n        const mapped = children.map((c) => toxml(c, gkey, ids));\r\n        return `<${name} ${Object.entries(evented)\r\n            .map(([key, val]) => (val !== undefined ? `${key}=\"${val}\"` : key))\r\n            .join(\" \")}>${mapped.join(\"\")}</${name}>`;\r\n    }\r\n    return el === null ? \"\" : String(el);\r\n};\r\nconst render = async (markup) => {\r\n    if (Array.isArray(markup)) {\r\n        const [tag, props, ...children] = markup;\r\n        const mapped = [];\r\n        for (const child of children) {\r\n            mapped.push(await render(child));\r\n        }\r\n        if (typeof tag === \"string\") {\r\n            return [tag, props, ...mapped];\r\n        }\r\n        const iterator = tag({ ...props, children: mapped });\r\n        if (iterator === null ||\r\n            typeof iterator !== \"object\" ||\r\n            Array.isArray(iterator)) {\r\n            return await render(iterator);\r\n        }\r\n        let id;\r\n        const rerender = async (loop) => {\r\n            do {\r\n                await (0,_lang__WEBPACK_IMPORTED_MODULE_0__.sleep)(0);\r\n            } while (loop && !document.getElementById(id));\r\n            const node = document.getElementById(id);\r\n            if (!node) {\r\n                return;\r\n            }\r\n            const next = await iterator.next(node);\r\n            if (next.done) {\r\n                return;\r\n            }\r\n            const element = (await render(next.value));\r\n            const [, props, ...children] = element;\r\n            Object.assign(node, props);\r\n            const ids = {};\r\n            node.innerHTML = children.map((e) => toxml(e, id, ids)).join(\" \");\r\n            rerender(false);\r\n        };\r\n        const next = await iterator.next();\r\n        if (next.done) {\r\n            return null;\r\n        }\r\n        const element = (await render(next.value));\r\n        const [, props2] = element;\r\n        id = props2.id || (0,_lang__WEBPACK_IMPORTED_MODULE_0__.createUid)();\r\n        props2.id = id; // don't reassign\r\n        rerender(true);\r\n        return element;\r\n    }\r\n    return markup;\r\n};\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXRhbHVpLy4vc3JjL21ldGFsdWkudHM/NjI5ZiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBd0Q7QUFpQnhELHVCQUF1QjtBQUNoQixNQUFNLEtBQUssR0FBRyxDQUNuQixFQUFXLEVBQ1gsSUFBWSxFQUNaLEdBQXVDLEVBQy9CLEVBQUU7SUFDVixJQUFJLEtBQUssQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLEVBQUU7UUFDckIsTUFBTSxDQUFDLElBQUksRUFBRSxLQUFLLEVBQUUsR0FBRyxRQUFRLENBQUMsR0FBRyxFQUFFO1FBQ3JDLE1BQU0sT0FBTyxHQUFHLCtDQUFRLENBQ3RCLDBDQUFHLENBQXFCLENBQUMsQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLEVBQUUsRUFBRTtZQUNyQyxJQUFJLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxLQUFLLElBQUksRUFBRTtnQkFDN0IsT0FBTyxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUM7YUFDbEI7aUJBQU07Z0JBQ0wsTUFBTSxFQUFFLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxnREFBUyxFQUFFO2dCQUNsQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsR0FBRztnQkFDaEIsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDO2dCQUUvQixPQUFPLENBQUMsR0FBRyxFQUFFLFNBQVMsSUFBSSxPQUFPLEVBQUUsV0FBVyxDQUFDO2FBQ2hEO1FBQ0gsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUNWO1FBRUQsTUFBTSxNQUFNLEdBQUcsUUFBUSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxJQUFJLEVBQUUsR0FBRyxDQUFDLENBQUM7UUFFdkQsT0FBTyxJQUFJLElBQUksSUFBSSxNQUFNLENBQUMsT0FBTyxDQUFD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QWtDO1FBQzNFLE1BQU0sQ0FBQyxFQUFFLE1BQU0sQ0FBQyxHQUFHLE9BQU87UUFDMUIsRUFBRSxHQUFHLE1BQU0sQ0FBQyxFQUFFLElBQUksZ0RBQVMsRUFBRTtRQUM3QixNQUFNLENBQUMsRUFBRSxHQUFHLEVBQUUsRUFBQyxpQkFBaUI7UUFFaEMsUUFBUSxDQUFDLElBQUksQ0FBQztRQUVkLE9BQU8sT0FBTztLQUNmO0lBRUQsT0FBTyxNQUFNO0FBQ2YsQ0FBQyIsImZpbGUiOiIuL3NyYy9tZXRhbHVpLnRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlVWlkLCBtYXAsIHNsZWVwLCB0b09iamVjdCB9IGZyb20gXCIuL2xhbmdcIlxyXG5cclxuZGVjbGFyZSBjb25zdCBnbG9iOiBSZWNvcmQ8c3RyaW5nLCBSZWNvcmQ8c3RyaW5nLCAoZTogRXZlbnQpID0+IHZvaWQ+PlxyXG5cclxuLy8gZS5nLiBBcHBQcm9wcywgUHJvcGVydHlQcm9wcyBldGM/XHJcbnR5cGUgUHJvcHMgPSBSZWNvcmQ8c3RyaW5nLCBhbnk+XHJcbnR5cGUgRWxlbWVudCA9IG51bGwgfCBib29sZWFuIHwgbnVtYmVyIHwgc3RyaW5nIHwgW3N0cmluZywgUHJvcHMsIC4uLkVsZW1lbnRbXV1cclxuZXhwb3J0IHR5cGUgQ29tcG9uZW50ID1cclxuICB8ICgocHJvcHM6IFByb3BzKSA9PiBNYXJrdXApXHJcbiAgfCAoKHByb3BzOiBQcm9wcykgPT4gQXN5bmNHZW5lcmF0b3I8TWFya3VwLCB2b2lkLCBIVE1MRWxlbWVudD4pXHJcbmV4cG9ydCB0eXBlIE1hcmt1cCA9XHJcbiAgfCBudWxsXHJcbiAgfCBib29sZWFuXHJcbiAgfCBudW1iZXJcclxuICB8IHN0cmluZ1xyXG4gIHwgW3N0cmluZyB8IENvbXBvbmVudCwgUHJvcHMsIC4uLk1hcmt1cFtdXVxyXG5cclxuLy8gSlNPTk1MIHRvIFhNTCBzdHJpbmdcclxuZXhwb3J0IGNvbnN0IHRveG1sID0gKFxyXG4gIGVsOiBFbGVtZW50LFxyXG4gIGdrZXk6IHN0cmluZyxcclxuICBpZHM6IFJlY29yZDxzdHJpbmcsIChlOiBFdmVudCkgPT4gdm9pZD5cclxuKTogc3RyaW5nID0+IHtcclxuICBpZiAoQXJyYXkuaXNBcnJheShlbCkpIHtcclxuICAgIGNvbnN0IFtuYW1lLCBwcm9wcywgLi4uY2hpbGRyZW5dID0gZWxcclxuICAgIGNvbnN0IGV2ZW50ZWQgPSB0b09iamVjdChcclxuICAgICAgbWFwPGFueSwgW3N0cmluZywgYW55XT4oKFtrZXksIHZhbF0pID0+IHtcclxuICAgICAgICBpZiAoa2V5LnN1YnN0cigwLCAyKSAhPT0gXCJvblwiKSB7XHJcbiAgICAgICAgICByZXR1cm4gW2tleSwgdmFsXVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBjb25zdCBpZCA9IGtleSArIFwiLVwiICsgY3JlYXRlVWlkKClcclxuICAgICAgICAgIGdsb2JbZ2tleV0gPSBpZHNcclxuICAgICAgICAgIGlkc1tpZF0gPSAoZXZlbnQpID0+IHZhbChldmVudClcclxuXHJcbiAgICAgICAgICByZXR1cm4gW2tleSwgYGdsb2JbJyR7Z2tleX0nXVsnJHtpZH0nXShldmVudClgXVxyXG4gICAgICAgIH1cclxuICAgICAgfSwgcHJvcHMpXHJcbiAgICApXHJcblxyXG4gICAgY29uc3QgbWFwcGVkID0gY2hpbGRyZW4ubWFwKChjKSA9PiB0b3htbChjLCBna2V5LCBpZHMpKVxyXG5cclxuICAgIHJldHVybiBgPCR7bmFtZX0gJHtPYmplY3QuZW50cmllcyhldmVudGVkKVxyXG4gICAgICAubWFwKChba2V5LCB2YWxdKSA9PiAodmFsICE9PSB1bmRlZmluZWQgPyBgJHtrZXl9PVwiJHt2YWx9XCJgIDoga2V5KSlcclxuICAgICAgLmpvaW4oXCIgXCIpfT4ke21hcHBlZC5qb2luKFwiXCIpfTwvJHtuYW1lfT5gXHJcbiAgfVxyXG5cclxuICByZXR1cm4gZWwgPT09IG51bGwgPyBcIlwiIDogU3RyaW5nKGVsKVxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgcmVuZGVyID0gYXN5bmMgKG1hcmt1cDogTWFya3VwKTogUHJvbWlzZTxFbGVtZW50PiA9PiB7XHJcbiAgaWYgKEFycmF5LmlzQXJyYXkobWFya3VwKSkge1xyXG4gICAgY29uc3QgW3RhZywgcHJvcHMsIC4uLmNoaWxkcmVuXSA9IG1hcmt1cFxyXG5cclxuICAgIGNvbnN0IG1hcHBlZDogRWxlbWVudFtdID0gW11cclxuICAgIGZvciAoY29uc3QgY2hpbGQgb2YgY2hpbGRyZW4pIHtcclxuICAgICAgbWFwcGVkLnB1c2goYXdhaXQgcmVuZGVyKGNoaWxkKSlcclxuICAgIH1cclxuXHJcbiAgICBpZiAodHlwZW9mIHRhZyA9PT0gXCJzdHJpbmdcIikge1xyXG4gICAgICByZXR1cm4gW3RhZywgcHJvcHMsIC4uLm1hcHBlZF1cclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBpdGVyYXRvciA9IHRhZyh7IC4uLnByb3BzLCBjaGlsZHJlbjogbWFwcGVkIH0pXHJcbiAgICBpZiAoXHJcbiAgICAgIGl0ZXJhdG9yID09PSBudWxsIHx8XHJcbiAgICAgIHR5cGVvZiBpdGVyYXRvciAhPT0gXCJvYmplY3RcIiB8fFxyXG4gICAgICBBcnJheS5pc0FycmF5KGl0ZXJhdG9yKVxyXG4gICAgKSB7XHJcbiAgICAgIHJldHVybiBhd2FpdCByZW5kZXIoaXRlcmF0b3IpXHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGlkOiBzdHJpbmdcclxuICAgIGNvbnN0IHJlcmVuZGVyID0gYXN5bmMgKGxvb3A6IGJvb2xlYW4pID0+IHtcclxuICAgICAgZG8ge1xyXG4gICAgICAgIGF3YWl0IHNsZWVwKDApXHJcbiAgICAgIH0gd2hpbGUgKGxvb3AgJiYgIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKSlcclxuXHJcbiAgICAgIGNvbnN0IG5vZGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZClcclxuICAgICAgaWYgKCFub2RlKSB7XHJcbiAgICAgICAgcmV0dXJuXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IG5leHQgPSBhd2FpdCBpdGVyYXRvci5uZXh0KG5vZGUpXHJcbiAgICAgIGlmIChuZXh0LmRvbmUpIHtcclxuICAgICAgICByZXR1cm5cclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgZWxlbWVudCA9IChhd2FpdCByZW5kZXIobmV4dC52YWx1ZSkpIGFzIFtcclxuICAgICAgICBzdHJpbmcsXHJcbiAgICAgICAgUHJvcHMsXHJcbiAgICAgICAgLi4uRWxlbWVudFtdXHJcbiAgICAgIF1cclxuXHJcbiAgICAgIGNvbnN0IFssIHByb3BzLCAuLi5jaGlsZHJlbl0gPSBlbGVtZW50XHJcbiAgICAgIE9iamVjdC5hc3NpZ24obm9kZSwgcHJvcHMpXHJcbiAgICAgIGNvbnN0IGlkcyA9IHt9XHJcbiAgICAgIG5vZGUuaW5uZXJIVE1MID0gY2hpbGRyZW4ubWFwKChlKSA9PiB0b3htbChlLCBpZCwgaWRzKSkuam9pbihcIiBcIilcclxuICAgICAgcmVyZW5kZXIoZmFsc2UpXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgbmV4dCA9IGF3YWl0IGl0ZXJhdG9yLm5leHQoKVxyXG4gICAgaWYgKG5leHQuZG9uZSkge1xyXG4gICAgICByZXR1cm4gbnVsbFxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGVsZW1lbnQgPSAoYXdhaXQgcmVuZGVyKG5leHQudmFsdWUpKSBhcyBbc3RyaW5nLCBQcm9wcywgLi4uRWxlbWVudFtdXVxyXG4gICAgY29uc3QgWywgcHJvcHMyXSA9IGVsZW1lbnRcclxuICAgIGlkID0gcHJvcHMyLmlkIHx8IGNyZWF0ZVVpZCgpXHJcbiAgICBwcm9wczIuaWQgPSBpZCAvLyBkb24ndCByZWFzc2lnblxyXG5cclxuICAgIHJlcmVuZGVyKHRydWUpXHJcblxyXG4gICAgcmV0dXJuIGVsZW1lbnRcclxuICB9XHJcblxyXG4gIHJldHVybiBtYXJrdXBcclxufVxyXG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/metalui.ts\n");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		if(__webpack_module_cache__[moduleId]) {
/******/ 			return __webpack_module_cache__[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval-source-map devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./src/main.ts");
/******/ 	
/******/ })()
;